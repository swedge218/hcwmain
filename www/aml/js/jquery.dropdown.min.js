/*!
 *
 *	jQuery Dropdown
 *
 *	http://danewilliams.uk/projects/jquery-dropdown
 *	https://github.com/daneWilliams/jquery.dropdown
 *
 *	================================================================
 *
 *	@version		1.1.0
 *
 *	@author			Dane Williams <dane@danewilliams.uk>
 *	@copyright		2014 Dane Williams
 *	@license		MIT License
 *
 */

;(function(e,t,n,r){dropdown=function(t,n){var r=this;r.elem=t;r.$elem=e(t);r.instance={uid:null,items:{},menus:{},menu:{current:null,main:null},above:false,open:false,opening:false,closing:false,animating:false,resizing:false,resetting:false,selected:null,focused:null,value:null,resizeTimeout:null};r.elements={};r.options=n;r.metadata=r.$elem.data("dropdown");r.init()};dropdown.prototype={init:function(){var t=this;t.options=e.extend(true,{},t.defaults,t.options,t.metadata);t.templates=e.extend(true,{},t.templates,t.options.templates);t.classes=t._mergeClasses();var r=n.createElement("p").style,i="transition"in r||"WebkitTransition"in r||"MozTransition"in r||"msTransition"in r||"OTransition"in r;if(!i){t.options.animate=false}t._buildDropdown();t._populate();t._bindEvents();t.$elem.trigger("dropdown-init",t)},open:function(n){var r=this;var i=r.instance,s=r.options,o=r.elements,u=r.classes;if(i.opening||i.closing)return;if(n){r.openMenu(n);return}r._beforeOpen();if(!s.animate){r._afterOpen();return}var a={opacity:0,y:-(o.toggleButton.outerHeight()/2)};var f={opacity:1,y:0};if(i.above){a.y=o.toggleButton.outerHeight()/2}var l=o.menuWrapper.css("position")=="fixed"?true:false;if(l){a={opacity:0};f={opacity:1};if(e(t).width()>e(t).height()){a.y="100%";f.y=0}else{a.x="100%";f.x=0}}i.animating=true;o.dropdown.addClass(u.animating);o.menuWrapper.show().css(a);if(l){o.overlay.show().css({opacity:0}).transition({opacity:1},s.speed)}o.menuWrapper.transition(f,s.speed,function(){i.animating=false;o.dropdown.removeClass(u.animating);r._afterOpen()})},close:function(n){var r=this;var i=r.instance,s=r.options,o=r.elements,u=r.classes;if(i.closing||i.opening)return;if(n){r.closeMenu(n);return}r._beforeClose();if(!s.animate){r._afterClose();return}var a={opacity:1,y:0};var f={opacity:0,y:-(o.toggleButton.outerHeight()/2)};if(i.above){f.y=o.toggleButton.outerHeight()/2}var l=o.menuWrapper.css("position")=="fixed"?true:false;if(l){a={opacity:1};f={opacity:0};if(e(t).width()>e(t).height()){a.y=0;f.y="100%"}else{a.x=0;f.x="100%"}}i.animating=true;o.dropdown.addClass(u.animating);o.menuWrapper.show().css(a);if(l){o.overlay.transition({opacity:0},s.speed)}o.menuWrapper.transition(f,s.speed,function(){i.animating=false;o.dropdown.removeClass(u.animating);o.menuWrapper.hide();r._afterClose()})},openMenu:function(e,t){var n=this;var r=n.instance,i=n.options,s=n.elements,o=n.classes;if(r.opening)return;e=n.getMenu(e);var u=n.getMenu();n._beforeOpenMenu(e,u);if(t||!i.animate||e.uid==u.uid){n._afterOpenMenu(e,u);return}var a={x:"100%"};e.elem.show().css(a);u.elem.css({x:0});var f={x:0};r.animating=true;s.dropdown.addClass(o.animating);u.elem.transition({x:"-100%"},i.speed);e.elem.transition(f,i.speed,function(){r.animating=false;s.dropdown.removeClass(o.animating);n._afterOpenMenu(e,u)})},closeMenu:function(e){var t=this;var n=t.instance,r=t.options,i=t.elements,s=t.classes;if(n.closing)return;e=t.getMenu(e);var o=false;if(e.parent){var u=t.getItem(e.parent);var o=t.getMenu(u.menu)}t._beforeCloseMenu(e,o);if(!r.animate||!o){if(!o)t.close();t._afterCloseMenu(e,o);return}var a={x:0};e.elem.css(a);o.elem.show().css({x:"-100%"});var f={x:"100%"};n.animating=true;i.dropdown.addClass(s.animating);o.elem.transition({x:0},r.speed);e.elem.transition(f,r.speed,function(){n.animating=false;i.dropdown.removeClass(s.animating);t._afterCloseMenu(e,o)})},resize:function(n,r){var i=this;var s=i.instance,o=i.options,u=i.objects,a=i.elements,f=i.classes;if(s.resizing)return;var l=r?false:n?true:false;if(n)n=i.getMenu(n);if(!n)n=i.getMenu();var c=e.extend(true,{},u.resize);i._beforeResize(n,c);c.height.viewport=e(t).height();c.width.viewport=e(t).width();if(!s.open){a.menuWrapper.show().css({opacity:0})}c.height.wrapper=a.menuWrapper.outerHeight(true);c.width.wrapper=a.menuWrapper.outerWidth(true);c.height.diff=c.height.wrapper-a.menuWrapper.height();c.width.diff=c.width.wrapper-a.menuWrapper.width();n.elem.show().css({opacity:0,position:"fixed",height:"",width:""});var h=n.elem.children("."+f.core.menuList).eq(0);h.css({height:"",width:""});c.height.list=h.height();c.width.list=h.width();c.height.menu=n.elem.outerHeight(true);c.width.menu=n.elem.outerWidth(true);var p=i._collisionValues(n,c);if(!s.open){a.menuWrapper.css({display:"",opacity:""})}n.elem.css({display:"",opacity:"",position:""});h.css({height:c.collision.height.list});if(!l||!o.animate){a.menuWrapper.css({height:c.collision.height.menu});i._afterResize(n,c);return c}a.menuWrapper.transition({height:c.collision.height.menu},o.speed,function(){i._afterResize(n,c)});return c},reset:function(e){var t=this;var n=t.instance,r=t.options,i=t.elements,s=t.classes;var o=t.getMenu("default");var u=t.getMenu();t._beforeReset(e,o,u);t._afterReset(e,o,u)},select:function(n){var r=this;var i=r.instance,s=r.options,o=r.elements,u=r.classes;n=r.getItem(n);if(!n)return;if(n.children.menu){r.openMenu(n.children.menu);return}if(!n.selectable){if(n.href)t.location.href=n.href;return}var a=false;if(!s.multiple)a=r.getItem(i.selected);if(a.uid==n.uid)a=false;r._beforeSelect(n,a);if(s.multiple){if(!i.selected)i.selected=[];if(n.selected){n.selected=false;n.elem.removeClass(u.selected);var f=e.inArray(n.uid,i.selected);i.selected.splice(f,1)}else{n.selected=true;n.elem.addClass(u.selected);i.selected.push(n.uid)}}else{if(a){a.selected=false;a.elem.removeClass(u.selected)}i.selected=n.uid;n.selected=true;n.elem.addClass(u.selected)}r.selectParent(n);if(a){r.selectParent(a)}if(s.autoToggle){if(!o.dropdown.find("."+u.core.selected).length){if(s.multiple)r.toggleTextMulti();else r.toggleText()}else{if(s.multiple)r.toggleTextMulti(n.text);else r.toggleText(n.text)}}if(!s.multiple){r.close()}r._afterSelect(n,a)},selectParent:function(t){var n=this;var r=n.settings,i=n.elements,s=n.classes;var o=n.getItem(t.parent);if(!o)return false;if(t.selected){o.selected=true;o.elem.addClass(s.selected)}else{var u=0;e.each(o.children.items,function(e,t){var r=n.getItem(t);if(r&&r.selected){u++}});if(!u){o.selected=false;o.elem.removeClass(s.selected)}}if(o.parent){n.selectParent(o)}},focus:function(e){var t=this;var n=t.instance,r=t.options,i=t.classes;if(n.focused){var s=t.getItem(n.focused);s.elem.removeClass(i.focused);n.focused=null}if(!e)return;e=t.getItem(e);if(!e)return;e.elem.addClass(i.focused);n.focused=e.uid},getItem:function(e){var t=this;var n=t.instance,r=t.elements;if(!e)return false;if(typeof e=="string"){if(n.items[e]){return n.items[e]}else{if(r.dropdown.find("#"+e).length){e=r.dropdown.find("#"+e)}else{return false}}}if(e.jquery){var i=e.data("dropdown-uid");if(!i||!n.items[i])return false;return n.items[i]}if(typeof e!="object")return false;return e},getMenu:function(e){var t=this;var n=t.instance,r=t.elements;var i=t.getItem(e);if(i){e=i.menu}if(!e)e=n.menu.current;if("default"==e)e=n.menu.main;if(typeof e=="string"){if(n.menus[e]){return n.menus[e]}else{if(r.dropdown.find("#"+e).length){e=r.dropdown.find("#"+e)}else{return false}}}if(e.jquery){var s=e.data("dropdown-uid");if(!s||!n.menus[s])return false;return n.menus[s]}if(!typeof e!="object")return false;return e},addItem:function(t,n){var r=this;var i=r.instance,s=r.options;var o=t;var u=[];n=r.getMenu(n);e.each(o,function(t,o){o=e.extend(true,{},r.objects.item,o);if(!o.uid)o.uid=r.getID();if(!o.menu)o.menu=n.uid;i.items[o.uid]=o;u.push(o);if(o.selected&&!o.children.items){if(s.multiple){if(!i.selected)i.selected=[];i.selected.push(o.uid);if(s.autoToggle){r.toggleTextMulti(o.text)}}else{i.selected=o.uid;if(s.autoToggle){r.toggleText(o.text)}}}if(o.children.items.length){if(!o.children.menu){var a=r.addMenu([{parent:o.uid,title:o.children.title}]);o.children.menu=a[0].uid}var f=r.addItem(o.children.items,o.children.menu);o.children.items=[];e.each(f,function(e,t){i.items[t.uid].parent=o.uid;o.children.items.push(t.uid);if(t.selected)o.selected=true})}o.elem=r._buildItem(o)});return u},addMenu:function(t){var n=this;var r=n.instance,i=n.options,s=n.classes;var o=t;var u=[];e.each(o,function(t,o){o=e.extend(true,{},n.objects.menu,o);if(!o.uid)o.uid=n.getID();r.menus[o.uid]=o;u.push(o);if(!o.title){o.title=i.titleText;if(i.autoTitle&&o.parent){var a=n.getItem(o.parent);if(a){o.title=a.text}}}o.elem=n._buildMenu(o);if(o.items){n.addItem(o.items,o.uid)}if(!r.menu.main){r.menu.main=o.uid;r.menu.current=o.uid;o.open=true;o.elem.addClass(s.menuOpen)}});return u},getID:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)});return e},titleText:function(e,t){var n=this;var r=n.elements,i=n.classes;t=n.getMenu(t);if(!t)return;var s=t.elem.find("."+i.core.menuTitle);if(e){if(!t.elem.data("dropdown-title"))t.elem.data("dropdown-title",s.html());s.html(e)}else{s.html(t.elem.data("dropdown-title"))}},toggleText:function(e){var t=this;var n=t.elements;if(e){if(!n.toggleButton.data("dropdown-text"))n.toggleButton.data("dropdown-text",n.toggleText.text());n.toggleText.html(e)}else{n.toggleText.html(n.toggleButton.data("dropdown-text"))}},toggleTextMulti:function(e){var t=this;var n=t.elements;var r=n.toggleButton.data("dropdown-text-multi");if(e){if(!n.toggleButton.data("dropdown-text"))n.toggleButton.data("dropdown-text",n.toggleText.text());if(!r)r=[];var i=r.indexOf(e);if(i!=-1){r.splice(i,1)}else{r.push(e)}if(!r){var s=n.toggleButton.data("dropdown-text")}else{var s=r.join(", ")}n.toggleButton.data("dropdown-text-multi",r);n.toggleText.html(s)}else{r=[];n.toggleButton.data("dropdown-text-multi",r);n.toggleText.html(n.toggleButton.data("dropdown-text"))}},_bindEvents:function(){var r=this;var i=r.instance,s=r.options,o=r.classes,u=r.elements;r.$elem.on("dropdown-toggle",function(){if(!i.open)r.open();else r.close()});u.toggleButton.on("click",function(e){e.preventDefault();r.$elem.trigger("dropdown-toggle")});u.dropdown.on("open",function(){r.open()});u.dropdown.on("close",function(){r.close()});u.dropdown.on("click","."+o.core.closeButton,function(e){e.preventDefault();r.close()});u.dropdown.on("click","."+o.core.menuItem,function(t){t.preventDefault();var n=e(this).data("dropdown-uid");r.select(n)});u.dropdown.on("click","."+o.core.backButton,function(e){e.preventDefault();r.closeMenu()});if(s.autoClose){e(n).on("mousedown",function(t){var n=e(t.target);var r=n.parents("."+o.core.dropdown);if(!r.length){e("."+o.core.open).trigger("close");return}})}if(s.autoResize){e(t).resize(function(){if(i.resizeTimeout)clearTimeout(i.resizeTimeout);i.resizeTimeout=setTimeout(function(){r._autoResize()},s.autoResize)})}if(s.keyboard){e(n).on("keypress",function(e){if(!i.open&&!u.toggleButton.is(":focus"))return;var t=i.focused;if(t){t=r.getItem(t)}var n=e.keyCode?e.keyCode:e.which;switch(n){case 9:if(u.toggleButton.is(":focus")&&i.open){e.preventDefault();r.close()}break;case 13:e.preventDefault();if(t){if(t.children.menu){var s=r.getMenu(t.children.menu);var a=s.elem.find("."+o.core.menuItem);if(s.elem.find("."+o.core.selected).length)a=s.elem.find("."+o.core.selected);r.focus(a.eq(0));r.open(t.children.menu)}else{r.select(t)}}else{if(u.toggleButton.is(":focus")){if(!i.open)r.open();else r.close()}}break;case 27:if(i.open){e.preventDefault();r.close()}break;case 40:e.preventDefault();var s=r.getMenu();if(u.toggleButton.is(":focus")&&!i.open){r.open();var a=s.elem.find("."+o.core.menuItem);if(s.elem.find("."+o.core.selected).length){a=s.elem.find("."+o.core.selected)}r.focus(a.eq(0))}else{if(!t){var a=s.elem.find("."+o.core.menuItem);if(s.elem.find("."+o.core.selected).length){a=s.elem.find("."+o.core.selected);if(a.next().length)a=a.next()}r.focus(a.eq(0))}}if(t){if(t.elem.next().length){r.focus(t.elem.next())}}break;case 37:if(i.open&&i.menu.main!=i.menu.current){e.preventDefault();var s=r.getMenu();var f=r.getItem(s.parent);r.closeMenu();r.focus(f)}break;case 38:if(i.open&&t){e.preventDefault();if(!t.elem.prev().length){r.focus(false);u.toggleButton.focus()}else{r.focus(t.elem.prev())}}break;case 39:if(i.open&&t){if(t.children.menu){e.preventDefault();var s=r.getMenu(t.children.menu);var a=s.elem.find("."+o.core.menuItem);if(s.elem.find("."+o.core.selected).length)a=s.elem.find("."+o.core.selected);r.focus(a.eq(0));r.open(t.children.menu)}}break}})}},_buildDropdown:function(){var t=this;var n=t.options,r=t.classes,i=t.templates,s=t.elements;e.each(t.templates,function(t,n){s[t]=e(n);if(r[t])s[t].addClass(r[t])});var o=t.getID();t.instance.uid=o;s.dropdown.data("dropdown-uid",o);s.overlay.appendTo(s.dropdown);s.menuWrapper.appendTo(s.dropdown);s.menuContainer.appendTo(s.menuWrapper);s.menuMask.prependTo(s.menuWrapper);var u=n.toggleElem.button?e(n.toggleElem.button):false;if(u&&!u.length){n.toggleElem.button=false;u=false}if(u){s.toggleButton=u}else{s.toggleIcon.appendTo(s.toggleButton);s.toggleText.appendTo(s.toggleButton)}s.toggleButton.eq(0).appendTo(s.dropdown);var a=n.toggleElem.text?e(n.toggleElem.text):false;if(a&&!a.length){n.toggleElem.text=false;a=false}if(a){s.toggleText=a}else{if(u){s.toggleText=s.toggleButton}}s.toggleText.html(n.toggleText);t.elements=s;t.$elem.hide().after(s.dropdown);if(t.$elem.attr("id")){s.dropdown.attr("id",t.$elem.attr("id")+"-dropdown")}t.addMenu([{}])},_buildItem:function(t){var n=this;var r=n.classes,i=n.templates,s=n.elements;var o=n.getMenu(t.menu);if(!o)return;var u=e(i.menuItem).addClass(r.menuItem);if(t.html){e(t.html).appendTo(u)}else{var a=e(i.menuLink).addClass(r.menuLink).appendTo(u);var f=e(i.menuText).addClass(r.menuText).appendTo(a);if(t.href){a.attr("href",t.href)}f.html(t.text);if(t.children.items){var l=e(i.iconNext).addClass(r.iconNext).prependTo(a)}}u.data("dropdown-uid",t.uid);if(t.id){u.attr("id",t.id)}if(t.selected){u.addClass(r.selected)}o.elem.children("."+r.core.menuList).append(u);return u},_buildMenu:function(t){var n=this;var r=n.options,i=n.classes,s=n.templates,o=n.elements;var u=e(s.menuObject).clone().addClass(i.menuObject);var a=e(s.menuHeader).addClass(i.menuHeader).appendTo(u);var f=e(s.menuTitle).addClass(i.menuTitle).appendTo(a);var l=e(s.closeButton).addClass(i.closeButton).appendTo(a);var c=e(s.backButton).addClass(i.backButton).prependTo(a);var h=e(s.closeIcon).addClass(i.closeIcon).appendTo(l);var p=e(s.closeText).addClass(i.closeText).appendTo(l);var d=e(s.backIcon).addClass(i.backIcon).appendTo(c);var v=e(s.backText).addClass(i.backText).appendTo(c);var m=e(s.menuList).addClass(i.menuList).appendTo(u);if(t.parent){u.addClass(i.menuChild)}f.html(t.title);p.html(r.closeText);v.html(r.backText);u.data("dropdown-uid",t.uid);if(t.id){u.attr("id",t.id)}o.menuContainer.append(u);return u},_populate:function(){var e=this;if(!e.$elem.children().length)return;var t=e.$elem.prop("tagName");if(t=="SELECT"){e._populateSelect();return}if(t=="UL"||t=="OL"){e._populateList();return}},_populateSelect:function(t){var n=this;var r=[];var i=t?t:n.$elem;i.children().each(function(){var t=e(this);var i={uid:n.getID(),text:"",value:null,children:{items:false}};if("OPTGROUP"==t.prop("tagName")){i.text=t.attr("label");var s=n._populateSelect(t);i.children.items=[];e.each(s,function(t,n){i.children.items.push(e.extend({},n,{parent:i.uid}))})}else{i.text=t.text();i.value=t.attr("value");if(!i.value&&i.value!=="0")i.value=i.text;if(t.is(":selected"))i.selected=true}r.push(i)});if(t)return r;n.addItem(r)},_populateList:function(t){var n=this;var r=n.classes;var i=[];var s=t?t:n.$elem;s.children().each(function(){var t=e(this);var s={text:"",value:null,children:{items:false}};s=e.extend({},s,t.data("dropdown"));if(!s.uid)s.uid=n.getID();if(t.children("ul, ol").length){var o=n._populateList(t.children("ul, ol"));s.children.items=[];e.each(o,function(t,n){s.children.items.push(e.extend({},n,{parent:s.uid}))})}else{if(!s.text){s.text=t.html()}}if(t.data("dropdown-text")){s.text=t.data("dropdown-text")}if(t.children("span").length){var u=t.children("span");if(!t.data("dropdown-text")){s.text=u.html()}else{if(!s.header)s.header=u.html()}}if(t.children("a").length){var a=t.children("a");s.href=a.attr("href");s.text=a.html()}if(t.hasClass("."+r.core.selected))s.selected=true;i.push(s)});if(t)return i;n.addItem(i)},_beforeOpen:function(){var t=this;var n=t.instance,r=t.elements,i=t.classes;n.opening=true;var s=t.resize(false,true);if(s.collision.position.y=="top"){r.dropdown.removeClass(i.below);r.dropdown.addClass(i.above);n.above=true}else{r.dropdown.removeClass(i.above);r.dropdown.addClass(i.below);n.above=false}t._scrollSelected(false,s);r.dropdown.addClass(i.opening);e("html").addClass(i.pageOpening);e("."+i.core.open).trigger("close");t.$elem.trigger("dropdown-before-open",t)},_afterOpen:function(){var t=this;var n=t.instance,r=t.elements,i=t.classes;n.opening=false;n.open=true;r.dropdown.removeClass(i.opening);r.dropdown.addClass(i.open);e("html").removeClass(i.pageOpening).addClass(i.pageOpen);r.toggleButton.focus();t.$elem.trigger("dropdown-after-open",t)},_beforeClose:function(){var t=this;var n=t.instance,r=t.elements,i=t.classes;n.closing=true;r.dropdown.addClass(i.closing);e("html").addClass(i.pageClosing);t.focus(false);t.$elem.trigger("dropdown-before-close",t)},_afterClose:function(){var t=this;var n=t.instance,r=t.elements,i=t.classes;setTimeout(function(){n.closing=false;n.open=false},1);r.dropdown.removeClass(i.closing);r.dropdown.removeClass(i.open);e("html").removeClass(i.pageClosing).removeClass(i.pageOpen);r.overlay.css({display:"",opacity:""});t.reset();r.menuWrapper.css({height:""});t.$elem.trigger("dropdown-after-close",t)},_beforeOpenMenu:function(e,t){var n=this;var r=n.instance,i=n.elements,s=n.classes;var o=n.resize(e.uid);r.opening=true;e.elem.addClass(s.menuOpening);t.elem.addClass(s.menuClosing);n._scrollSelected(e.uid,o);n.$elem.trigger("dropdown-before-open-menu",[e,t,n])},_afterOpenMenu:function(e,t){var n=this;var r=n.instance,i=n.elements,s=n.classes;r.opening=false;t.open=false;e.open=true;r.menu.current=e.uid;e.elem.removeClass(s.menuOpening);t.elem.removeClass(s.menuClosing);t.elem.removeClass(s.menuOpen);e.elem.addClass(s.menuOpen);t.elem.find("."+s.core.menuList).eq(0).css({height:""});n.$elem.trigger("dropdown-after-open-menu",[e,t,n])},_beforeCloseMenu:function(e,t){var n=this;var r=n.instance,i=n.elements,s=n.classes;if(t){n.resize(t.uid)}r.closing=true;e.elem.addClass(s.menuClosing);if(t){t.elem.addClass(s.menuOpening)}n.$elem.trigger("dropdown-before-close-menu",[e,t,n])},_afterCloseMenu:function(e,t){var n=this;var r=n.instance,i=n.elements,s=n.classes;r.closing=false;e.open=false;if(t){t.open=true}if(t){r.menu.current=t.uid}else{r.menu.current=r.menu.main}e.elem.removeClass(s.menuClosing);e.elem.removeClass(s.menuOpen);if(t){t.elem.removeClass(s.menuOpening);t.elem.addClass(s.menuOpen)}e.elem.find("."+s.core.menuList).eq(0).css({height:""});n.$elem.trigger("dropdown-after-close-menu",[e,t,n])},_beforeResize:function(e,t){var n=this;var r=n.instance,i=n.elements,s=n.classes;r.resizing=true;n.$elem.trigger("dropdown-before-resize",[e,t,n])},_afterResize:function(e,t){var n=this;var r=n.instance;r.resizing=false;n.$elem.trigger("dropdown-after-resize",[e,t,n])},_beforeReset:function(e,t,n){var r=this;var i=r.instance;i.resetting=true;r.$elem.trigger("dropdown-before-reset",[e,t,n,r])},_afterReset:function(e,t,n){var r=this;var i=r.instance,s=r.elements,o=r.classes;i.resetting=false;i.opening=false;i.closing=false;i.animating=false;n.open=false;t.open=true;i.menu.current=t.uid;t.elem.removeClass(o.menuOpening);n.elem.removeClass(o.menuClosing);n.elem.removeClass(o.menuOpen);t.elem.addClass(o.menuOpen);s.menuWrapper.css({x:0,y:0});n.elem.css({x:"-100%"});t.elem.css({x:0});s.menuWrapper.css({height:""});n.elem.find("."+o.core.menuList).eq(0).css({height:""});r.$elem.trigger("dropdown-after-reset",[e,t,n,r])},_autoResize:function(){var e=this;var t=e.instance;if(t.open){e.resize(false,true)}},_collisionValues:function(r,i){var s=this;var o=s.instance,u=s.options,a=s.elements,f=s.classes;var l={x:e(n).scrollLeft(),y:e(n).scrollTop()};var c={x:"left",y:"bottom"};var h={x:a.dropdown.offset().left,y:a.dropdown.offset().top};var p={top:h.y-l.y,bottom:e(t).height()+l.y-h.y-a.toggleButton.outerHeight(true),left:h.x-l.x,right:e(t).width()+l.x-h.x};e.each(p,function(e,t){p[e]=t-u.margin});var d=a.menuWrapper.css("position")=="fixed"?true:false;var v=e.extend({},i.height);v.total=v.menu+v.diff;if(d){if(v.menu>v.wrapper){v.menu=v.wrapper-v.diff}}else{if(v.total>p.bottom||o.above&&v.total>p.top){v.menu=p.bottom-v.diff;if(p.top>p.bottom){c.y="top";if(v.total>p.top){v.menu=p.top-v.diff}else{v.menu=i.height.menu}}}}v.list=v.menu-(i.height.menu-i.height.list);var m=e.extend({},i.width);i.collision.height=v;i.collision.width=m;i.collision.scrolled=l;i.collision.position=c;i.collision.offset=h;i.collision.space=p;return i},_scrollSelected:function(e,t){var n=this;var r=n.instance,i=n.options,s=n.elements,o=n.classes;e=n.getMenu(e);if(!e)return;if(!r.open){s.menuWrapper.show().css({opacity:0})}if(!e.open){e.elem.show().css({opacity:0})}var u=e.elem.children("."+o.core.menuList).eq(0);var a=0;var f=e.elem.find("."+o.core.selected).eq(0);if(f.length){a=f.position().top;if(a<0||a>t.collision.height.list){a=a+u.scrollTop()}a=a-(t.collision.height.menu-t.collision.height.list)}u.animate({scrollTop:a},1);if(!r.open){s.menuWrapper.css({display:"",opacity:""})}if(!e.open){e.elem.css({display:"",opacity:""})}},_beforeSelect:function(e,t){var n=this;n.$elem.trigger("dropdown-before-select",[e,t,n])},_afterSelect:function(e,t){var n=this;n.$elem.trigger("dropdown-after-select",[e,t,n])},_mergeClasses:function(){var t=this;var n=t.options.classes;var r=e.extend({},t.classes);var i={};e.each(r,function(e,t){if(!i.core)i.core={};i.core[e]=t;var r=t;if(n[e]){r+=" ";r+=n[e]}i[e]=r});return i},objects:{item:{uid:null,id:null,text:"",value:null,href:false,html:null,selected:false,selectable:true,menu:false,parent:false,children:{menu:false,title:"",items:false}},menu:{uid:null,id:null,title:"",open:false,parent:false,children:false},resize:{width:{viewport:0,wrapper:0,diff:0,menu:0,list:0},height:{viewport:0,wrapper:0,diff:0,menu:0,list:0},collision:{width:{},height:{},offset:{x:0,y:0},position:{x:"left",y:"bottom"},scrolled:{x:0,y:0},space:{above:0,below:0,left:0,right:0}}}},defaults:{animate:true,speed:300,autoClose:true,autoToggle:true,autoTitle:true,autoResize:300,nested:true,multiple:false,keyboard:true,maxHeight:0,maxWidth:0,margin:30,toggleText:"Please select",titleText:"Please select",backText:"Back",closeText:"Close",toggleElem:{button:null,text:null},classes:{toggleIcon:"fa fa-sort",backIcon:"fa fa-arrow-left",closeIcon:"fa fa-remove",iconPrev:"fa fa-angle-left",iconNext:"fa fa-angle-right"},templates:{}},templates:{dropdown:"<div />",overlay:"<div />",menuObject:"<div />",menuWrapper:"<div />",menuContainer:"<nav />",menuHeader:"<header />",menuTitle:"<div />",menuMask:"<div />",menuList:'<ul role="menu" />',menuItem:'<li role="presentation" />',menuHeading:'<li role="presentation" />',menuDivider:'<li role="presentation" />',menuLink:'<a href="#" role="menuitem" />',menuText:"<span />",toggleButton:'<a href="#" />',toggleText:"<span />",toggleIcon:"<span />",backButton:'<a href="#" title="Back" />',backText:"<span />",backIcon:"<span />",closeButton:'<a href="#" title="Close" />',closeText:"<span />",closeIcon:"<span />",iconPrev:"<span />",iconNext:"<span />"},classes:{dropdown:"dropdown",overlay:"dropdown-overlay",mainMenu:"dropdown-main-menu",menuObject:"dropdown-menu",menuWrapper:"dropdown-menu-wrapper",menuContainer:"dropdown-menu-container",menuHeader:"dropdown-header",menuTitle:"dropdown-title",menuHeading:"dropdown-heading",menuDivider:"dropdown-divider",menuMask:"dropdown-mask",menuParent:"dropdown-parent",menuChild:"dropdown-child",menuList:"dropdown-list",menuItem:"dropdown-item",menuLink:"dropdown-link",menuText:"dropdown-text",menuAbove:"dropdown-above",backButton:"dropdown-back",backText:"dropdown-text",backIcon:"dropdown-icon",toggleButton:"dropdown-toggle",toggleText:"dropdown-text",toggleIcon:"dropdown-icon",closeButton:"dropdown-close",closeText:"dropdown-text",closeIcon:"dropdown-icon",iconPrev:"dropdown-icon",iconNext:"dropdown-icon",above:"dropdown-above",below:"dropdown-below",open:"dropdown-open",menuOpen:"dropdown-menu-open",closed:"dropdown-closed",disabled:"dropdown-disabled",opening:"dropdown-opening",closing:"dropdown-closing",animating:"dropdown-animating",resize:"dropdown-resizing",loading:"dropdown-loading",menuOpening:"dropdown-menu-opening",menuClosing:"dropdown-menu-closing",selected:"dropdown-selected",selectedParent:"dropdown-parent-selected",focused:"dropdown-focus",pageOpen:"dropdown-open",pageOpening:"dropdown-opening",pageClosing:"dropdown-closing"}};e.fn.dropdown=function(t){var n=arguments;if(t===r||typeof t==="object"){return this.each(function(){if(!e.data(this,"dw.plugin.dropdown")){e.data(this,"dw.plugin.dropdown",new dropdown(this,t))}})}else if(typeof t==="string"&&t[0]!=="_"&&t!=="init"){var i;this.each(function(){var r=e.data(this,"dw.plugin.dropdown");if(r instanceof dropdown&&typeof r[t]==="function"){i=r[t].apply(r,Array.prototype.slice.call(n,1))}if(t==="destroy"){e.data(this,"dw.plugin.dropdown",null)}});return i!==r?i:this}};if(!t.dw)t.dw={};t.dw.dropdown=dropdown})(jQuery,window,document);

/*!
* jQuery Transit - CSS3 transitions and transformations
* (c) 2011-2014 Rico Sta. Cruz
* MIT Licensed.
*
* http://ricostacruz.com/jquery.transit
* http://github.com/rstacruz/jquery.transit
*/

(function(t,e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(t.jQuery)}})(this,function(t){t.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var e=document.createElement("div");var n={};function i(t){if(t in e.style)return t;var n=["Moz","Webkit","O","ms"];var i=t.charAt(0).toUpperCase()+t.substr(1);for(var r=0;r<n.length;++r){var s=n[r]+i;if(s in e.style){return s}}}function r(){e.style[n.transform]="";e.style[n.transform]="rotateY(90deg)";return e.style[n.transform]!==""}var s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=i("transition");n.transitionDelay=i("transitionDelay");n.transform=i("transform");n.transformOrigin=i("transformOrigin");n.filter=i("Filter");n.transform3d=r();var a={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var o=n.transitionEnd=a[n.transition]||null;for(var u in n){if(n.hasOwnProperty(u)&&typeof t.support[u]==="undefined"){t.support[u]=n[u]}}e=null;t.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new f},set:function(e,i){var r=i;if(!(r instanceof f)){r=new f(r)}if(n.transform==="WebkitTransform"&&!s){e.style[n.transform]=r.toString(true)}else{e.style[n.transform]=r.toString()}t(e).data("transform",r)}};t.cssHooks.transform={set:t.cssHooks["transit:transform"].set};t.cssHooks.filter={get:function(t){return t.style[n.filter]},set:function(t,e){t.style[n.filter]=e}};if(t.fn.jquery<"1.8"){t.cssHooks.transformOrigin={get:function(t){return t.style[n.transformOrigin]},set:function(t,e){t.style[n.transformOrigin]=e}};t.cssHooks.transition={get:function(t){return t.style[n.transition]},set:function(t,e){t.style[n.transition]=e}}}p("scale");p("scaleX");p("scaleY");p("translate");p("rotate");p("rotateX");p("rotateY");p("rotate3d");p("perspective");p("skewX");p("skewY");p("x",true);p("y",true);function f(t){if(typeof t==="string"){this.parse(t)}return this}f.prototype={setFromString:function(t,e){var n=typeof e==="string"?e.split(","):e.constructor===Array?e:[e];n.unshift(t);f.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);if(this.setter[t]){this.setter[t].apply(this,e)}else{this[t]=e.join(",")}},get:function(t){if(this.getter[t]){return this.getter[t].apply(this)}else{return this[t]||0}},setter:{rotate:function(t){this.rotate=b(t,"deg")},rotateX:function(t){this.rotateX=b(t,"deg")},rotateY:function(t){this.rotateY=b(t,"deg")},scale:function(t,e){if(e===undefined){e=t}this.scale=t+","+e},skewX:function(t){this.skewX=b(t,"deg")},skewY:function(t){this.skewY=b(t,"deg")},perspective:function(t){this.perspective=b(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(t!==null&&t!==undefined){this._translateX=b(t,"px")}if(e!==null&&e!==undefined){this._translateY=b(e,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");if(t[0]){t[0]=parseFloat(t[0])}if(t[1]){t[1]=parseFloat(t[1])}return t[0]===t[1]?t[0]:t},rotate3d:function(){var t=(this.rotate3d||"0,0,0,0deg").split(",");for(var e=0;e<=3;++e){if(t[e]){t[e]=parseFloat(t[e])}}if(t[3]){t[3]=b(t[3],"deg")}return t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var i in this){if(this.hasOwnProperty(i)){if(!n.transform3d&&(i==="rotateX"||i==="rotateY"||i==="perspective"||i==="transformOrigin")){continue}if(i[0]!=="_"){if(t&&i==="scale"){e.push(i+"3d("+this[i]+",1)")}else if(t&&i==="translate"){e.push(i+"3d("+this[i]+",0)")}else{e.push(i+"("+this[i]+")")}}}}return e.join(" ")}};function c(t,e,n){if(e===true){t.queue(n)}else if(e){t.queue(e,n)}else{t.each(function(){n.call(this)})}}function l(e){var i=[];t.each(e,function(e){e=t.camelCase(e);e=t.transit.propertyMap[e]||t.cssProps[e]||e;e=h(e);if(n[e])e=h(n[e]);if(t.inArray(e,i)===-1){i.push(e)}});return i}function d(e,n,i,r){var s=l(e);if(t.cssEase[i]){i=t.cssEase[i]}var a=""+y(n)+" "+i;if(parseInt(r,10)>0){a+=" "+y(r)}var o=[];t.each(s,function(t,e){o.push(e+" "+a)});return o.join(", ")}t.fn.transition=t.fn.transit=function(e,i,r,s){var a=this;var u=0;var f=true;var l=t.extend(true,{},e);if(typeof i==="function"){s=i;i=undefined}if(typeof i==="object"){r=i.easing;u=i.delay||0;f=typeof i.queue==="undefined"?true:i.queue;s=i.complete;i=i.duration}if(typeof r==="function"){s=r;r=undefined}if(typeof l.easing!=="undefined"){r=l.easing;delete l.easing}if(typeof l.duration!=="undefined"){i=l.duration;delete l.duration}if(typeof l.complete!=="undefined"){s=l.complete;delete l.complete}if(typeof l.queue!=="undefined"){f=l.queue;delete l.queue}if(typeof l.delay!=="undefined"){u=l.delay;delete l.delay}if(typeof i==="undefined"){i=t.fx.speeds._default}if(typeof r==="undefined"){r=t.cssEase._default}i=y(i);var p=d(l,i,r,u);var h=t.transit.enabled&&n.transition;var b=h?parseInt(i,10)+parseInt(u,10):0;if(b===0){var g=function(t){a.css(l);if(s){s.apply(a)}if(t){t()}};c(a,f,g);return a}var m={};var v=function(e){var i=false;var r=function(){if(i){a.unbind(o,r)}if(b>0){a.each(function(){this.style[n.transition]=m[this]||null})}if(typeof s==="function"){s.apply(a)}if(typeof e==="function"){e()}};if(b>0&&o&&t.transit.useTransitionEnd){i=true;a.bind(o,r)}else{window.setTimeout(r,b)}a.each(function(){if(b>0){this.style[n.transition]=p}t(this).css(l)})};var z=function(t){this.offsetWidth;v(t)};c(a,f,z);return this};function p(e,i){if(!i){t.cssNumber[e]=true}t.transit.propertyMap[e]=n.transform;t.cssHooks[e]={get:function(n){var i=t(n).css("transit:transform");return i.get(e)},set:function(n,i){var r=t(n).css("transit:transform");r.setFromString(e,i);t(n).css({"transit:transform":r})}}}function h(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function b(t,e){if(typeof t==="string"&&!t.match(/^[\-0-9\.]+$/)){return t}else{return""+t+e}}function y(e){var n=e;if(typeof n==="string"&&!n.match(/^[\-0-9\.]+/)){n=t.fx.speeds[n]||t.fx.speeds._default}return b(n,"ms")}t.transit.getTransitionValue=d;return t});